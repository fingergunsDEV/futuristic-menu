<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Holistic Growth Marketing | Enhanced Mega Menu</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.11.4/dist/gsap.min.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');

    body {
      font-family: 'Poppins', sans-serif;
      overflow-x: hidden;
      background-color: #FFF; /* slate-900 */
      color: #e2e8f0; /* slate-200 for default text */
    }

    /* Mega Menu General */
    .mega-menu {
      transform: translateY(-100%);
      transition: transform 0.5s cubic-bezier(0.16, 1, 0.3, 1);
      pointer-events: none;
      padding-top: 4rem; /* Height of the header */
    }

    .mega-menu.active {
      transform: translateY(0);
      pointer-events: all;
    }

    /* Header Nav Item Styling */
    .menu-item-nav {
      position: relative;
      overflow: hidden;
      transition: all 0.3s ease;
      cursor: pointer;
    }
    .menu-item-nav::after {
      content: '';
      position: absolute;
      bottom: -2px;
      left: 0;
      width: 0;
      height: 2px;
      background-color: #38bdf8; /* sky-500 */
      transition: width 0.3s ease;
    }
    .menu-item-nav:hover::after {
      width: 100%;
    }

    /* Card hover effect (can be applied to demo cards etc.) */
    .menu-card-interactive:hover {
      transform: translateY(-5px) scale(1.02);
      box-shadow: 0 20px 25px -5px rgba(56, 189, 248, 0.2), 0 10px 10px -5px rgba(56, 189, 248, 0.1);
    }
    
    /* 3D Background (Optional, consider performance on mobile) */
    .canvas-container {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      opacity: 0.2; /* Reduced further for better text readability */
    }

    /* Primary Button Styling */
    .btn-primary {
      position: relative;
      overflow: hidden;
      transition: all 0.3s ease;
    }
    .btn-primary::before { /* Ripple effect */
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      background-color: rgba(255, 255, 255, 0.2);
      border-radius: 50%;
      transform: translate(-50%, -50%);
      transition: width 0.6s ease, height 0.6s ease;
    }
    .btn-primary:hover::before {
      width: 300px;
      height: 300px;
    }

    /* Submenu links within mega menu */
    .submenu-item {
      transition: all 0.2s ease-in-out;
      display: block;
      padding: 4px 0;
    }
    .submenu-item:hover {
      transform: translateX(5px);
      color: #38bdf8; /* sky-400 */
    }

    /* Close button for mega menu */
    .close-btn {
      transition: transform 0.3s ease, color 0.3s ease;
    }
    .close-btn:hover {
      transform: rotate(90deg);
      color: #38bdf8; /* sky-400 */
    }
    
    /* Custom scrollbar for mega menu content */
    .custom-scrollbar::-webkit-scrollbar { width: 6px; }
    .custom-scrollbar::-webkit-scrollbar-track { background: rgba(255, 255, 255, 0.05); border-radius: 10px; }
    .custom-scrollbar::-webkit-scrollbar-thumb { background: #38bdf8; border-radius: 10px; }
    .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #0ea5e9; }

    /* Animated background for body */
    .animated-bg {
      background: linear-gradient(-45deg, #0f172a, #1e293b, #0f3460, #0a2342);
      background-size: 400% 400%;
      animation: gradient 15s ease infinite;
    }
    @keyframes gradient { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
    
    /* Gradient text utility */
    .gradient-text {
        background-image: linear-gradient(to right, #38bdf8, #818cf8); /* sky-500 to indigo-400 */
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
    }

    /* Hamburger Menu Icon Lines */
    .hamburger-line {
        width: 20px; height: 2px; background-color: white; display: block; margin: 4px auto; transition: all 0.3s ease-in-out;
    }
    .mega-menu.active .hamburger-line-1 { transform: rotate(45deg) translate(4px, 4px); }
    .mega-menu.active .hamburger-line-2 { opacity: 0; }
    .mega-menu.active .hamburger-line-3 { transform: rotate(-45deg) translate(4px, -4px); }

  </style>
</head>
<body class="min-h-screen animated-bg text-slate-100">
  <header class="bg-slate-800/90 backdrop-blur-md text-white py-4 px-6 flex justify-between items-center fixed top-0 left-0 right-0 z-50 shadow-lg h-16">
    <a href="https://www.holisticgrowthmarketing.com/" class="text-xl md:text-2xl font-bold bg-gradient-to-r from-sky-400 to-indigo-500 bg-clip-text text-transparent flex items-center">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 md:h-8 md:w-8 mr-2" viewBox="0 0 20 20" fill="currentColor"> <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z" clip-rule="evenodd" /> </svg>
      Holistic Growth Marketing
    </a>
    
    <!-- Desktop Navigation -->
    <nav class="hidden md:flex">
      <ul class="flex space-x-5 lg:space-x-6">
        <li><span class="menu-item-nav text-xs lg:text-sm font-medium hover:text-sky-400" data-menu="services">Services</span></li>
        <li><span class="menu-item-nav text-xs lg:text-sm font-medium hover:text-sky-400" data-menu="industries">Industries</span></li>
        <li><span class="menu-item-nav text-xs lg:text-sm font-medium hover:text-sky-400" data-menu="locations">Locations</span></li>
        <li><span class="menu-item-nav text-xs lg:text-sm font-medium hover:text-sky-400" data-menu="resources">Resources</span></li>
        <li><span class="menu-item-nav text-xs lg:text-sm font-medium hover:text-sky-400" data-menu="tools">Tools</span></li>
        <li><span class="menu-item-nav text-xs lg:text-sm font-medium hover:text-sky-400" data-menu="company">Company</span></li>
      </ul>
    </nav>

    <div class="flex items-center">
        <a href="https://www.holisticgrowthmarketing.com/contact" class="bg-gradient-to-r from-sky-500 to-indigo-500 px-3 py-1.5 md:px-4 md:py-2 rounded-md text-xs md:text-sm font-medium btn-primary shadow-lg mr-3 md:mr-0">
            Get Started
        </a>
        <!-- Hamburger Menu Button - MD and below -->
        <button id="hamburger-menu" class="md:hidden p-2 focus:outline-none z-50 relative">
            <span class="hamburger-line hamburger-line-1"></span>
            <span class="hamburger-line hamburger-line-2"></span>
            <span class="hamburger-line hamburger-line-3"></span>
        </button>
    </div>
  </header>

  <div class="mega-menu fixed inset-0 bg-slate-900/95 backdrop-blur-md z-40 overflow-hidden">
    <div class="canvas-container" id="menu-background"></div>
    <div class="container mx-auto px-4 sm:px-6 py-6 relative z-10 h-full flex flex-col">
      <div class="flex justify-end mb-2 md:mb-4">
        <!-- Close button for desktop, hamburger icon acts as toggle on mobile -->
        <button class="close-btn text-white opacity-70 hover:opacity-100 hidden md:block">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>

      <div class="flex-grow overflow-y-auto custom-scrollbar max-h-[calc(100vh-8rem)] md:max-h-[calc(100vh-10rem)]">
        <!-- Base URL for links -->
        <script>const baseUrl = "https://www.holisticgrowthmarketing.com";</script>

        <!-- Services Menu -->
        <div class="menu-content hidden" id="services-menu">
          <div class="flex items-center mb-6">
            <h2 class="text-2xl md:text-3xl font-bold text-white">Our Services</h2>
            <div class="h-0.5 md:h-1 bg-gradient-to-r from-sky-500 to-indigo-500 flex-grow ml-4 rounded-full"></div>
          </div>
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-x-6 gap-y-4 md:gap-y-6">
            <div>
              <h3 class="text-lg md:text-xl font-semibold text-sky-400 mb-2 md:mb-3">SEO Services</h3>
              <ul class="space-y-1 text-sm" id="services-seo-links"></ul>
            </div>
            <div>
              <h3 class="text-lg md:text-xl font-semibold text-sky-400 mb-2 md:mb-3">Content & Digital</h3>
              <ul class="space-y-1 text-sm" id="services-content-digital-links"></ul>
            </div>
            <div>
              <h3 class="text-lg md:text-xl font-semibold text-sky-400 mb-2 md:mb-3">Data, Analytics & Web</h3>
              <ul class="space-y-1 text-sm" id="services-data-web-links"></ul>
            </div>
            <div>
              <h3 class="text-lg md:text-xl font-semibold text-sky-400 mb-2 md:mb-3">Optimization & Mgmt</h3>
              <ul class="space-y-1 text-sm" id="services-optimization-mgmt-links"></ul>
              <a href="https://www.holisticgrowthmarketing.com/services" class="mt-3 inline-block text-sky-400 font-medium hover:text-sky-300 text-xs md:text-sm">View All Services â†’</a>
            </div>
          </div>
          <!-- Interactive Dashboards & Demos Section -->
          <div class="mt-8 pt-6 border-t border-slate-700">
            <div class="flex items-center mb-6">
                <h3 class="text-xl md:text-2xl font-bold text-white">Interactive Dashboards & Demos</h3>
                <div class="h-0.5 md:h-1 bg-gradient-to-r from-teal-400 to-cyan-500 flex-grow ml-4 rounded-full"></div>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6">
                <!-- Demo Card 1 -->
                <div class="bg-slate-800/70 p-4 rounded-lg shadow-lg menu-card-interactive transition-all duration-300">
                    <h4 class="text-lg font-semibold text-teal-300 mb-2">SEO Performance Dashboard</h4>
                    <p class="text-slate-300 text-xs mb-3">Track your keyword rankings, organic traffic, backlink profile, and technical SEO health in real-time.</p>
                    <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2">
                        <a href="/demo/marketing-dashboard" class="flex-1 text-center bg-teal-600 hover:bg-teal-500 text-white px-3 py-1.5 rounded-md text-xs font-medium transition-colors">View Demo</a>
                        <a href="#try-free-seo" class="flex-1 text-center bg-gradient-to-r from-sky-500 to-indigo-500 hover:from-sky-600 hover:to-indigo-600 text-white px-3 py-1.5 rounded-md text-xs font-medium btn-primary">Try Free for 7 Days</a>
                    </div>
                </div>
                <!-- Demo Card 2 -->
                <div class="bg-slate-800/70 p-4 rounded-lg shadow-lg menu-card-interactive transition-all duration-300">
                    <h4 class="text-lg font-semibold text-teal-300 mb-2">Marketing ROI Dashboard</h4>
                    <p class="text-slate-300 text-xs mb-3">Visualize your marketing spend across channels and measure ROI, CPL, and campaign effectiveness.</p>
                    <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2">
                        <a href="#view-demo-roi" class="flex-1 text-center bg-teal-600 hover:bg-teal-500 text-white px-3 py-1.5 rounded-md text-xs font-medium transition-colors">View Demo</a>
                        <a href="#try-free-roi" class="flex-1 text-center bg-gradient-to-r from-sky-500 to-indigo-500 hover:from-sky-600 hover:to-indigo-600 text-white px-3 py-1.5 rounded-md text-xs font-medium btn-primary">Try Free for 7 Days</a>
                    </div>
                </div>
                <!-- Demo Card 3 -->
                <div class="bg-slate-800/70 p-4 rounded-lg shadow-lg menu-card-interactive transition-all duration-300">
                    <h4 class="text-lg font-semibold text-teal-300 mb-2">Holistic BI Analytics Suite</h4>
                    <p class="text-slate-300 text-xs mb-3">Integrate data from multiple sources for comprehensive business intelligence and strategic insights.</p>
                     <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2">
                        <a href="#view-demo-bi" class="flex-1 text-center bg-teal-600 hover:bg-teal-500 text-white px-3 py-1.5 rounded-md text-xs font-medium transition-colors">View Demo</a>
                        <a href="#try-free-bi" class="flex-1 text-center bg-gradient-to-r from-sky-500 to-indigo-500 hover:from-sky-600 hover:to-indigo-600 text-white px-3 py-1.5 rounded-md text-xs font-medium btn-primary">Try Free for 7 Days</a>
                    </div>
                </div>
            </div>
          </div>
        </div>

        <!-- Industries Menu -->
        <div class="menu-content hidden" id="industries-menu">
          <div class="flex items-center mb-6"><h2 class="text-2xl md:text-3xl font-bold text-white">Industries We Serve</h2><div class="h-0.5 md:h-1 bg-gradient-to-r from-sky-500 to-indigo-500 flex-grow ml-4 rounded-full"></div></div>
          <div class="grid grid-cols-1 md:grid-cols-3 gap-x-6 gap-y-4 md:gap-y-6">
            <div><h3 class="text-lg md:text-xl font-semibold text-sky-400 mb-2 md:mb-3">Construction & Real Estate</h3><ul class="space-y-1 text-sm" id="industries-construction-links"></ul></div>
            <div><h3 class="text-lg md:text-xl font-semibold text-sky-400 mb-2 md:mb-3">Professional Services</h3><ul class="space-y-1 text-sm" id="industries-professional-links"></ul></div>
            <div><h3 class="text-lg md:text-xl font-semibold text-sky-400 mb-2 md:mb-3">Other Key Sectors</h3><ul class="space-y-1 text-sm" id="industries-other-links"></ul></div>
          </div>
        </div>

        <!-- Locations Menu -->
        <div class="menu-content hidden" id="locations-menu">
          <div class="flex items-center mb-6"><h2 class="text-2xl md:text-3xl font-bold text-white">Our Locations</h2><div class="h-0.5 md:h-1 bg-gradient-to-r from-sky-500 to-indigo-500 flex-grow ml-4 rounded-full"></div></div>
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-x-6 gap-y-4 md:gap-y-6">
            <div><h3 class="text-lg md:text-xl font-semibold text-sky-400 mb-2 md:mb-3">Los Angeles Area</h3><ul class="space-y-1 text-sm" id="locations-la-links"></ul><h3 class="text-lg md:text-xl font-semibold text-sky-400 mt-3 md:mt-4 mb-2 md:mb-3">Other California</h3><ul class="space-y-1 text-sm" id="locations-ca-other-links"></ul></div>
            <div><h3 class="text-lg md:text-xl font-semibold text-sky-400 mb-2 md:mb-3">East Coast Cities</h3><ul class="space-y-1 text-sm" id="locations-east-links"></ul></div>
            <div><h3 class="text-lg md:text-xl font-semibold text-sky-400 mb-2 md:mb-3">Central & Southern Cities</h3><ul class="space-y-1 text-sm" id="locations-central-south-links"></ul></div>
            <div><h3 class="text-lg md:text-xl font-semibold text-sky-400 mb-2 md:mb-3">More Cities</h3><ul class="space-y-1 text-sm" id="locations-more-links"></ul><a href="https://www.holisticgrowthmarketing.com/locations" class="mt-3 inline-block text-sky-400 font-medium hover:text-sky-300 text-xs md:text-sm">View All Locations â†’</a></div>
          </div>
        </div>

        <!-- Resources Menu -->
        <div class="menu-content hidden" id="resources-menu">
          <div class="flex items-center mb-6"><h2 class="text-2xl md:text-3xl font-bold text-white">Knowledge Hub</h2><div class="h-0.5 md:h-1 bg-gradient-to-r from-sky-500 to-indigo-500 flex-grow ml-4 rounded-full"></div></div>
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-x-6 gap-y-4 md:gap-y-6">
            <div><h3 class="text-lg md:text-xl font-semibold text-sky-400 mb-2 md:mb-3">Learn Core Concepts</h3><ul class="space-y-1 text-sm" id="resources-learn-links"></ul></div>
            <div><h3 class="text-lg md:text-xl font-semibold text-sky-400 mb-2 md:mb-3">Articles & Insights</h3><ul class="space-y-1 text-sm" id="resources-articles-links"></ul></div>
            <div><h3 class="text-lg md:text-xl font-semibold text-sky-400 mb-2 md:mb-3">Guides & Practical Tools</h3><ul class="space-y-1 text-sm" id="resources-guides-links"></ul></div>
            <div><h3 class="text-lg md:text-xl font-semibold text-sky-400 mb-2 md:mb-3">Browse by Topic</h3><ul class="space-y-1 text-sm" id="resources-topics-links"></ul><a href="https://www.holisticgrowthmarketing.com/resources" class="mt-3 inline-block text-sky-400 font-medium hover:text-sky-300 text-xs md:text-sm">All Resources â†’</a></div>
          </div>
        </div>

        <!-- Tools Menu -->
        <div class="menu-content hidden" id="tools-menu">
          <div class="flex items-center mb-6"><h2 class="text-2xl md:text-3xl font-bold text-white">SEO & Marketing Tools</h2><div class="h-0.5 md:h-1 bg-gradient-to-r from-sky-500 to-indigo-500 flex-grow ml-4 rounded-full"></div></div>
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-x-6 gap-y-4 md:gap-y-6">
            <div><h3 class="text-lg md:text-xl font-semibold text-sky-400 mb-2 md:mb-3">Content & Analysis</h3><ul class="space-y-1 text-sm" id="tools-content-analysis-links"></ul></div>
            <div><h3 class="text-lg md:text-xl font-semibold text-sky-400 mb-2 md:mb-3">Development & Utility</h3><ul class="space-y-1 text-sm" id="tools-dev-utility-links"></ul></div>
            <div><h3 class="text-lg md:text-xl font-semibold text-sky-400 mb-2 md:mb-3">AI & Automation</h3><ul class="space-y-1 text-sm" id="tools-ai-automation-links"></ul></div>
            <div><h3 class="text-lg md:text-xl font-semibold text-sky-400 mb-2 md:mb-3">SEO Specific</h3><ul class="space-y-1 text-sm" id="tools-seo-specific-links"></ul><a href="https://www.holisticgrowthmarketing.com/tools/seo-toolbox" class="mt-3 inline-block text-sky-400 font-medium hover:text-sky-300 text-xs md:text-sm">Explore SEO Toolbox â†’</a></div>
          </div>
        </div>

        <!-- Company Menu -->
        <div class="menu-content hidden" id="company-menu">
          <div class="flex items-center mb-6"><h2 class="text-2xl md:text-3xl font-bold text-white">About Our Company</h2><div class="h-0.5 md:h-1 bg-gradient-to-r from-sky-500 to-indigo-500 flex-grow ml-4 rounded-full"></div></div>
          <div class="grid grid-cols-1 md:grid-cols-3 gap-x-6 gap-y-4 md:gap-y-6">
            <div><h3 class="text-lg md:text-xl font-semibold text-sky-400 mb-2 md:mb-3">Who We Are</h3><ul class="space-y-1 text-sm" id="company-about-links"></ul></div>
            <div><h3 class="text-lg md:text-xl font-semibold text-sky-400 mb-2 md:mb-3">Our Work & People</h3><ul class="space-y-1 text-sm" id="company-work-links"></ul></div>
            <div><h3 class="text-lg md:text-xl font-semibold text-sky-400 mb-2 md:mb-3">Connect & Legal</h3><ul class="space-y-1 text-sm" id="company-connect-links"></ul></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // --- DATA FROM SITEMAP (Manually Parsed & Organized) ---
    const sitemapData = { // Make sure 'industies' is corrected to 'industries' if it was a typo in source
      services: [
        { path: '/services/search-engine-optimization', group: 'seo' }, { path: '/services/local-seo', group: 'seo' },
        { path: '/services/google-business-seo', group: 'seo' }, { path: '/services/on-page-seo', group: 'seo' },
        { path: '/services/off-page-seo', group: 'seo' }, { path: '/services/technical-seo', group: 'seo' },
        { path: '/services/e-commerce-seo', group: 'seo' }, { path: '/services/link-building', group: 'seo' },
        { path: '/services/keyword-research', group: 'content-digital' }, { path: '/services/content-marketing', group: 'content-digital' },
        { path: '/services/content-creation', group: 'content-digital' }, { path: '/services/digital-marketing', group: 'content-digital' },
        { path: '/services/email-marketing', group: 'content-digital' }, { path: '/services/local-ads-management', group: 'content-digital' },
        { path: '/services/business-intelligence', group: 'data-web' }, { path: '/services/data-analysis-and-reporting', group: 'data-web' },
        { path: '/services/seo-reporting-services', group: 'data-web' }, { path: '/services/trend-analysis-forecasting', group: 'data-web' },
        { path: '/services/web-design', group: 'data-web' }, { path: '/services/web-development-services', group: 'data-web' },
        { path: '/services/conversion-rate-optimization', group: 'optimization-mgmt' }, { path: '/services/marketing-automation', group: 'optimization-mgmt' },
        { path: '/services/review-management', group: 'optimization-mgmt' },
      ],
      industries: [ // Corrected from 'industies'
        { path: '/industries/residential-construction-seo', title: 'Residential Construction SEO', group: 'construction' },
        { path: '/industries/nonresidential-construction-seo', title: 'Nonresidential Construction SEO', group: 'construction' },
        { path: '/sectors/construction-seo', title: 'Construction Sector SEO', group: 'construction' },
        { path: '/industries/roofing', group: 'construction' },
        { path: '/industries/property-management-seo', title: 'Property Management SEO', group: 'construction' },
        { path: '/industries/finance-banking-seo', title: 'Finance & Banking SEO', group: 'professional' },
        { path: '/industries/healthcare-seo', title: 'Healthcare SEO', group: 'professional' },
        { path: '/industries/durable-goods-manufacturing-seo', title: 'Durable Goods Manufacturing SEO', group: 'other' },
      ],
      locations: [
        { path: '/los-angeles-seo', group: 'la' }, { path: '/los-angeles/beverly-hills-seo', group: 'la' },
        { path: '/los-angeles/venice-seo', group: 'la' }, { path: '/los-angeles/santa-monica-seo', group: 'la' },
        { path: '/los-angeles/culver-city-seo', group: 'la' }, { path: '/los-angeles/hollywood-seo-services', group: 'la' },
        { path: '/los-angeles/echo-park-digital-marketing-seo', group: 'la' }, { path: '/los-angeles/west-la-seo-services', group: 'la' },
        { path: '/los-angeles/marina-del-rey-seo', group: 'la' }, { path: '/san-francisco-seo', group: 'ca-other' },
        { path: '/new-york-city-seo', group: 'east' }, { path: '/locations/philadelphia-seo', group: 'east' },
        { path: '/locations/boston-seo', group: 'east' }, { path: '/locations/washington-dc-seo', group: 'east' },
        { path: '/miami-seo', group: 'central-south' }, { path: '/locations/orlando-seo-services', group: 'central-south' },
        { path: '/atlanta-seo', group: 'central-south' }, { path: '/houston-seo', group: 'central-south' },
        { path: '/locations/dallas-seo', group: 'central-south' }, { path: '/locations/san-antonio-seo', group: 'central-south' },
        { path: '/locations/new-orleans-seo', group: 'central-south' }, { path: '/chicago-seo', group: 'more' },
        { path: '/locations/detroit-seo-services', group: 'more' }, { path: '/locations/cleveland-oh-seo', group: 'more' },
        { path: '/locations/st-louis-seo', group: 'more' }, { path: '/locations/kansas-city-seo', group: 'more' },
        { path: '/locations/indianapolis-seo', group: 'more' }, { path: '/locations/memphis-seo', group: 'more' },
        { path: '/locations/nashville-seo', group: 'more' }, { path: '/locations/el-paso-seo', group: 'more' },
        { path: '/locations/portland-seo', group: 'more' }, { path: '/locations/seattle-seo', group: 'more' },
      ],
      resources: [
        { path: '/resources/holistic-seo', group: 'learn' }, { path: '/resources/holistic-marketing', group: 'learn' },
        { path: '/resources/holistic-growth', group: 'learn' }, { path: '/resources/seo-fundamentals', group: 'learn' },
        { path: '/resources/data-driven-marketing', group: 'learn' }, { path: '/resources/best-articles', group: 'articles' },
        { path: '/resources/popular-articles', group: 'articles' }, { path: '/resources/newsletter', group: 'articles' },
        { path: '/topics-seo', title: 'Browse All Topics', group: 'articles' }, { path: '/resources/pricing', group: 'guides' },
        { path: '/resources/seo-case-study-national-franchise', group: 'guides' }, { path: '/resources/google-sheets-templates', group: 'guides' },
        { path: '/resources/glossary', group: 'guides' }, { path: '/resources/schema-markup', group: 'guides' },
        { path: '/resources/schema-markup-seo', group: 'guides' }, { path: '/resources/information-retrieval', group: 'guides' },
        { path: '/resources/local-info/beverly-hills-business-statistics-2025', title: 'Beverly Hills Stats 2025', group: 'guides' },
        { path: '/topic/content-marketing', group: 'topics' }, { path: '/topic/business-intelligence', group: 'topics' },
        { path: '/topic/digital-marketing', group: 'topics' }, { path: '/topic/keyword-research', group: 'topics' },
        { path: '/topic/artificial-intelligence', group: 'topics' }, { path: '/topic/social-media-marketing', group: 'topics' },
        { path: '/topic/review-management', group: 'topics' }, { path: '/topic/automation', group: 'topics' },
      ],
      tools: [
        { path: '/tools/word-counter-plus', group: 'content-analysis' }, { path: '/tools/content-analyzer', group: 'content-analysis' },
        { path: '/tools/content-brief-generator', group: 'content-analysis' }, { path: '/tools/sitemap-analyzer', group: 'seo-specific' },
        { path: '/tools/schema-generator', group: 'seo-specific' }, { path: '/tools/branded-vs-non-branded-keywords', group: 'seo-specific' },
        { path: '/tools/html-analyzer', group: 'dev-utility' }, { path: '/tools/html-markdown-editor', group: 'dev-utility' },
        { path: '/tools/image-converter', group: 'dev-utility' }, { path: '/tools/google-sheets-to-json-converter', group: 'dev-utility' },
        { path: '/tools/chrome-extension-builder', group: 'dev-utility' }, { path: '/tools/ai-output-cleaner-tool', group: 'ai-automation' },
        { path: '/tools/advanced-prompt-generator', group: 'ai-automation' }, { path: '/tools/ai-code-generator', group: 'ai-automation' },
      ],
      company: [
        { path: '/about-us', group: 'about' }, { path: '/our-mission', group: 'about' },
        { path: '/ethics-statement', group: 'about' }, { path: '/resources/authors', group: 'work' },
        { path: '/author/jason-gibson', group: 'work' }, { path: '/projects/web-projects', group: 'work' },
        { path: '/demo/marketing-dashboard', group: 'work' }, { path: '/contact', group: 'connect' },
        { path: '/term/privacy-policy', group: 'connect' }, { path: '/term/cookies', group: 'connect' },
        { path: '/term/licensing', group: 'connect' },
      ]
    };

    // --- HELPER FUNCTIONS ---
    function slugToTitle(slug, fullPath = '') {
        if (!slug) return '';
        let title = slug;
        const pathOverrides = {
            '/services/google-business-seo': 'Google Business SEO', '/services/e-commerce-seo': 'E-commerce SEO',
            '/services/on-page-seo': 'On-Page SEO', '/services/off-page-seo': 'Off-Page SEO',
            '/los-angeles/hollywood-seo-services': 'Hollywood SEO Services',
            '/los-angeles/echo-park-digital-marketing-seo': 'Echo Park Digital Marketing & SEO',
            '/los-angeles/west-la-seo-services': 'West LA SEO Services', '/locations/cleveland-oh-seo': 'Cleveland, OH SEO',
            '/locations/st-louis-seo': 'St. Louis SEO', '/locations/washington-dc-seo': 'Washington D.C. SEO',
            '/resources/seo-case-study-national-franchise': 'SEO Case Study: National Franchise',
            '/resources/local-info/beverly-hills-business-statistics-2025': 'Beverly Hills Business Stats 2025',
            '/tools/branded-vs-non-branded-keywords': 'Branded vs Non-Branded Keywords Tool',
            '/tools/google-sheets-to-json-converter': 'Google Sheets to JSON Converter',
            '/industries/residential-construction-seo': 'Residential Construction SEO', // Corrected from 'industies'
            '/industries/property-management-seo': 'Property Management SEO',
            '/industries/finance-banking-seo': 'Finance & Banking SEO', '/industries/healthcare-seo': 'Healthcare SEO',
            '/industries/nonresidential-construction-seo': 'Nonresidential Construction SEO',
            '/industries/durable-goods-manufacturing-seo': 'Durable Goods Mfg. SEO',
            '/sectors/construction-seo': 'Construction Sector SEO',
        };
        if (pathOverrides[fullPath]) return pathOverrides[fullPath];
        title = title.replace(/-/g, ' ').replace(/\bseo\b/gi, 'SEO').replace(/\bai\b/gi, 'AI');
        if (title.toLowerCase() === 'los angeles') title = 'Los Angeles';
        if (title.toLowerCase() === 'new york city') title = 'New York City';
        if (title.toLowerCase() === 'san francisco') title = 'San Francisco';
        return title.split(' ').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ');
    }

    function populateLinks(items, linkMappings) {
        items.forEach(item => {
            const pathSegments = item.path.split('/').filter(Boolean);
            const slug = pathSegments.pop();
            const title = item.title || slugToTitle(slug, item.path);
            const fullUrl = baseUrl + item.path;
            const container = document.getElementById(linkMappings[item.group]);
            if (container) {
                const li = document.createElement('li');
                const a = document.createElement('a');
                a.href = fullUrl; a.textContent = title;
                a.className = 'submenu-item text-slate-300 hover:text-sky-300';
                li.appendChild(a); container.appendChild(li);
            }
        });
    }

    // --- POPULATE MENUS & MEGA MENU INTERACTION ---
    document.addEventListener('DOMContentLoaded', () => {
        // Populate all link sections
        populateLinks(sitemapData.services, {'seo': 'services-seo-links', 'content-digital': 'services-content-digital-links', 'data-web': 'services-data-web-links', 'optimization-mgmt': 'services-optimization-mgmt-links'});
        populateLinks(sitemapData.industries, {'construction': 'industries-construction-links', 'professional': 'industries-professional-links', 'other': 'industries-other-links'});
        populateLinks(sitemapData.locations, {'la': 'locations-la-links', 'ca-other': 'locations-ca-other-links', 'east': 'locations-east-links', 'central-south': 'locations-central-south-links', 'more': 'locations-more-links'});
        populateLinks(sitemapData.resources, {'learn': 'resources-learn-links', 'articles': 'resources-articles-links', 'guides': 'resources-guides-links', 'topics': 'resources-topics-links'});
        populateLinks(sitemapData.tools, {'content-analysis': 'tools-content-analysis-links', 'dev-utility': 'tools-dev-utility-links', 'ai-automation': 'tools-ai-automation-links', 'seo-specific': 'tools-seo-specific-links'});
        populateLinks(sitemapData.company, {'about': 'company-about-links', 'work': 'company-work-links', 'connect': 'company-connect-links'});

        const menuItems = document.querySelectorAll('.menu-item-nav');
        const megaMenu = document.querySelector('.mega-menu');
        const menuContents = document.querySelectorAll('.menu-content');
        const closeBtn = megaMenu.querySelector('.close-btn');
        const hamburgerBtn = document.getElementById('hamburger-menu');
        const body = document.body;
        let activeMenuContentElement = null;

        function openMenu(menuId) {
            const targetMenuContent = document.getElementById(menuId + '-menu');
            megaMenu.classList.add('active');
            body.style.overflow = 'hidden'; // Prevent body scroll when menu is open
            hamburgerBtn.setAttribute('aria-expanded', 'true');


            menuContents.forEach(content => content.style.display = 'none');
            if (targetMenuContent) {
                targetMenuContent.style.display = 'block';
                activeMenuContentElement = targetMenuContent;
                const listItems = targetMenuContent.querySelectorAll('.submenu-item, .menu-card-interactive'); // Animate cards too
                gsap.fromTo(listItems, { opacity: 0, x: -10 }, { opacity: 1, x: 0, stagger: 0.03, duration: 0.3, ease: "power2.out" });
            } else {
                activeMenuContentElement = null;
            }
        }

        function closeMegaMenu() {
            megaMenu.classList.remove('active');
            body.style.overflow = 'auto'; // Restore body scroll
            menuContents.forEach(content => content.style.display = 'none');
            activeMenuContentElement = null;
            hamburgerBtn.setAttribute('aria-expanded', 'false');

        }

        menuItems.forEach(item => {
            item.addEventListener('click', (e) => {
                e.preventDefault();
                const menuId = item.dataset.menu;
                const targetMenuContent = document.getElementById(menuId + '-menu');
                if (megaMenu.classList.contains('active') && activeMenuContentElement === targetMenuContent) {
                    closeMegaMenu();
                } else {
                    openMenu(menuId);
                }
            });
        });
        
        hamburgerBtn.addEventListener('click', () => {
            if (megaMenu.classList.contains('active')) {
                closeMegaMenu();
            } else {
                // If no specific menu is active, open the first one or a default
                // For mobile, we often just show all nav items or a primary menu
                // Here, we'll try to open the 'services' menu by default if no other is active.
                // Or, simply toggle the container and let user pick from items displayed differently for mobile.
                // For this implementation, if a menu was previously open, it will reopen.
                // If no menu content is active, we might need a default or a mobile-specific view.
                // For now, let's assume if hamburger is clicked and menu inactive, it means we want to show *a* menu.
                // The desktop logic may have already set an activeMenuContentElement if a nav item was clicked.
                // If not, we default to 'services' for the mobile toggle action.
                 if (!activeMenuContentElement && menuContents.length > 0) {
                     openMenu(menuItems[0].dataset.menu); // Open the first menu item by default
                 } else if (activeMenuContentElement) {
                     openMenu(activeMenuContentElement.id.replace('-menu','')); // Re-open last active
                 } else {
                    // Fallback if somehow no menu content is available.
                    megaMenu.classList.toggle('active'); // Just toggle the shell
                    body.style.overflow = megaMenu.classList.contains('active') ? 'hidden' : 'auto';
                 }
            }
        });

        closeBtn.addEventListener('click', closeMegaMenu);
        megaMenu.addEventListener('click', (e) => { // Close if clicking on backdrop
            if (e.target === megaMenu) closeMegaMenu();
        });

        // --- Optional: 3D Background for Mega Menu (check performance on mobile) ---
        const menuBackgroundContainer = document.getElementById('menu-background');
        if (menuBackgroundContainer && typeof THREE !== 'undefined' && typeof gsap !== 'undefined') {
            // Consider disabling on small screens if performance is an issue
            // if (window.innerWidth < 768) return; 
            
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, menuBackgroundContainer.clientWidth / menuBackgroundContainer.clientHeight, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
            renderer.setSize(menuBackgroundContainer.clientWidth, menuBackgroundContainer.clientHeight);
            menuBackgroundContainer.appendChild(renderer.domElement);
            const particlesGeometry = new THREE.BufferGeometry();
            const particlesCnt = window.innerWidth < 768 ? 2000 : 5000; // Fewer particles on mobile
            const posArray = new Float32Array(particlesCnt * 3);
            for (let i = 0; i < particlesCnt * 3; i++) {
                posArray[i] = (Math.random() - 0.5) * (Math.random() * 10 + 5) ;
            }
            particlesGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
            const particlesMaterial = new THREE.PointsMaterial({size: 0.008, color: 0x38bdf8, transparent: true, opacity: 0.5});
            const particlesMesh = new THREE.Points(particlesGeometry, particlesMaterial);
            scene.add(particlesMesh);
            camera.position.z = 4;
            const mouse = { x: 0, y: 0 };
            // Throttled mouse move for performance
            let MOUSEMOVE_TIMEOUT;
            document.addEventListener('mousemove', (event) => {
                clearTimeout(MOUSEMOVE_TIMEOUT);
                MOUSEMOVE_TIMEOUT = setTimeout(() => {
                    mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
                    mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
                }, 50); // Update mouse position less frequently
            });
            function animateMenuBackground() {
                requestAnimationFrame(animateMenuBackground);
                particlesMesh.rotation.y += 0.00005 + (mouse.x * 0.0001); // Slower rotation
                particlesMesh.rotation.x += 0.00002 + (mouse.y * 0.00005);
                renderer.render(scene, camera);
            }
            animateMenuBackground();
            window.addEventListener('resize', () => {
                camera.aspect = menuBackgroundContainer.clientWidth / menuBackgroundContainer.clientHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(menuBackgroundContainer.clientWidth, menuBackgroundContainer.clientHeight);
            });
        }
    });
  </script>
</body>
</html>
